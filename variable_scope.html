<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <script>
        'use strict';
        // 如果内部函数和外部函数的变量名重名怎么办？
        // JavaScript的函数在查找变量时从自身函数定义开始，从“内”向“外”查找。
        // 如果内部函数定义了与外部函数重名的变量，则内部函数的变量将“屏蔽”外部函数的变量。
        function foo() {
            var x = 1;
            function bar() {
                var x = 'A';
                console.log('x in bar() = ' + x); // 'A'
            }
            console.log('x in foo() = ' + x); // 1
            bar();
        }
        foo();

        // 全局作用域
        // 不在任何函数内定义的变量就具有全局作用域。实际上，JavaScript默认有一个全局对象window，全局作用域的变量实际上被绑定到window的一个属性：
        var course = 'Learn JavaScript';
        console.log(course); // 'Learn JavaScript'
        console.log(window.course); // 'Learn JavaScript'
        // 你可能猜到了，由于函数定义有两种方式，以变量方式var foo = function () {}定义的函数实际上也是一个全局变量，
        // 因此，顶层函数的定义也被视为一个全局变量，并绑定到window对象：
        function foo() {
            console.log('foo');
        }

        foo(); // 直接调用foo()
        window.foo(); // 通过window.foo()调用
        // 这说明JavaScript实际上只有一个全局作用域。任何变量（函数也视为变量），如果没有在当前函数作用域中找到，
        // 就会继续往上查找，最后如果在全局作用域中也没有找到，则报ReferenceError错误。

        // -------------------------------------------------------------------------------------------------
        // 名字空间
        // 全局变量会绑定到window上，不同的JavaScript文件如果使用了相同的全局变量，或者定义了相同名字的顶层函数，都会造成命名冲突，并且很难被发现。
        // 减少冲突的一个方法是把自己的所有变量和函数全部绑定到一个全局变量中。例如：

        // 唯一的全局变量MYAPP:
        var MYAPP = {};

        // 其他变量:
        MYAPP.name = 'myapp';
        MYAPP.version = 1.0;

        // 其他函数:
        MYAPP.foo = function () {
            return 'foo';
        };
        console.log("MYAPP.foo:" + MYAPP.foo());

        //局部作用域

        // 由于JavaScript的变量作用域实际上是函数内部，我们在for循环等语句块中是无法定义具有局部作用域的变量的：
        function foo() {
            for (var i=0; i<100; i++) {
                //
            }
            i += 100; // 仍然可以引用变量i
        }
        // 为了解决块级作用域，ES6引入了新的关键字let，用let替代var可以申明一个块级作用域的变量：
        function foo() {
            var sum = 0;
            for (let i=0; i<100; i++) {
                sum += i;
            }
            // i += 1; // SyntaxError
        }
        // -------------------------------------------常量------------------------------------------
        // 由于var和let申明的是变量，如果要申明一个常量，在ES6之前是不行的，我们通常用全部大写的变量来表示“这是一个常量，不要修改它的值”：
        // var PI = 3.14;
        // ES6标准引入了新的关键字const来定义常量，const与let都具有块级作用域：
        const PI = 3.14;
        PI = 3; // 某些浏览器不报错，但是无效果！
        console.log("PI=" + PI); // 3.14
    </script>
</head>
<body>

</body>
</html>

